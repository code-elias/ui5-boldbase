<core:FragmentDefinition
  xmlns="sap.m"
  xmlns:t="sap.ui.table"
  xmlns:rowmodes="sap.ui.table.rowmodes"
  xmlns:f="sap.f"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:dnd="sap.ui.core.dnd"
  xmlns:layout="sap.ui.layout"
  xmlns:core="sap.ui.core"
>
  <t:Table
    id="ProductsOrderTable"
    rows="{Orders>/List}"
    enableCellFilter="true"
    ariaLabelledBy="title"
    selectionMode="MultiToggle"
    alternateRowColors="true"
    busyIndicatorDelay="0"
    fixedColumnCount="3"
    visible="{= ${Products>/SelectedTab} === 'order'}"
  >
    <!-- Row Mode -->
    <t:rowMode>
      <rowmodes:Auto />
    </t:rowMode>

    <!-- Extension: Toolbar -->
    <t:extension>
      <OverflowToolbar style="Clear">
        <ToolbarSpacer />

        <ToolbarSeparator />

        <Button
          icon="sap-icon://action-settings"
          press=".openTablePersonalizationSettings($event, 'ProductsOrderTable')"
          tooltip="{i18n>PERSONALIZE_TABLE}"
          type="Transparent"
        />
      </OverflowToolbar>
    </t:extension>

    <!-- Columns -->
    <t:columns>
      <!-- CODE -->
      <t:Column
        width="8rem"
        sortProperty="Code"
        filterProperty="Code"
        autoResizable="true"
      >
        <Label text="{i18n>PRODUCT_CODE}" />
        <t:template>
          <Label
            text="{Orders>Code}"
          />
        </t:template>
      </t:Column>

      <!-- NAME -->
      <t:Column
        width="10rem"
        sortProperty="Name"
        filterProperty="Name"
        autoResizable="true"
      >
        <Label
          text="{i18n>NAME}"
        />
        <t:template>
          <Label
            text="{Orders>Name}"
            design="Bold"
          />
        </t:template>
      </t:Column>

      <!-- PRODUCT CATEGORY -->
      <t:Column
        width="10rem"
        sortProperty="ProductCategory"
        filterProperty="ProductCategory"
        autoResizable="true"
      >
        <Label
          text="{i18n>CATEGORY}"
        />
        <t:template>
          <!-- Adjust if your model has the name or ID differently (e.g., 'CategoryName'). -->
          <Label
            text="{Orders>Category}"
          />
        </t:template>
      </t:Column>

      <!-- PRICE -->
      <t:Column
        width="6rem"
        sortProperty="Price"
        filterProperty="Price"
        autoResizable="true"
      >
        <Label
          text="{i18n>PRICE}"
        />
        <t:template>
          <Label
            text="{Orders>Price}"
          />
        </t:template>
      </t:Column>

      <!-- VAT -->
      <t:Column
        width="5rem"
        sortProperty="VAT"
        filterProperty="VAT"
        autoResizable="true"
      >
        <Label
          text="{i18n>VAT}"
        />
        <t:template>
          <Label
            text="{Orders>VAT}"
          />
        </t:template>
      </t:Column>

      <!-- WARRANTY -->
      <t:Column
        width="8rem"
        sortProperty="Warranty"
        filterProperty="Warranty"
        autoResizable="true"
      >
        <Label
          text="{i18n>WARRANTY}"
        />
        <t:template>
          <!-- If 'WarrantyId' references Warranties(Id), you might store the name or do an
          association in your model. -->
          <Label
            text="{Orders>Warranty}"
          />
        </t:template>
      </t:Column>

      <!-- BUNDLE -->
      <t:Column
        width="8rem"
        sortProperty="Bundle"
        filterProperty="Bundle"
        autoResizable="true"
      >
        <Label
          text="{i18n>BUNDLE}"
        />
        <t:template>
          <!-- If there's no bundle, you might want to show an empty string or 'None' -->
          <Label
            text="{
              = ${Orders>BundleId} 
                ? ${Orders>Bundle} 
                : 'None'
            }"
          />
        </t:template>
      </t:Column>

      <!-- SUBSCRIPTION -->
      <t:Column
        width="10rem"
        sortProperty="Subscription"
        filterProperty="Subscription"
        autoResizable="true"
      >
        <Label
          text="{i18n>SUBSCRIPTION}"
        />
        <t:template>
          <!-- If your model has 'Subscription' name or similar field. -->
          <Label
            text="{
              = ${Orders>SubscriptionId}
                ? ${Orders>Subscription}
                : 'None'
            }"
          />
        </t:template>
      </t:Column>

      <!-- DESCRIPTION -->
      <t:Column
        width="auto"
        sortProperty="Description"
        filterProperty="Description"
        autoResizable="true"
      >
        <Label
          text="{i18n>DESCRIPTION}"
        />
        <t:template>
          <Text
            text="{Orders>Description}"
            maxLines="2"
            width="15rem"
            wrapping="true"
          />
        </t:template>
      </t:Column>

      <!-- FREETEXT -->
      <t:Column
        width="auto"
        sortProperty="FreeText"
        filterProperty="FreeText"
        autoResizable="true"
      >
        <Label
          text="{i18n>INFO}"
        />
        <t:template>
          <Text
            text="{Orders>FreeText}"
            maxLines="2"
            width="15rem"
            wrapping="true"
          />
        </t:template>
      </t:Column>

    </t:columns>
  </t:Table>
</core:FragmentDefinition>